{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = 'live_T9LOtLYHAv6KhL2fGHosUVgFryfx9rB2J6x7kAgl8lqRbPsVFYQkCYagWcXOVTH2';\nconst API_URL = \"https://api.thecatapi.com/v1\";\n\nconst BREEDS_URI = '/breeds';\nconst IMAGE_URI = '/images/search';\n\nconst catApi = axios.create({\n  baseURL: API_URL,\n  headers: {'x-api-key': API_KEY}\n});\n\nexport const fetchBreeds = () => {\n  return catApi.get(BREEDS_URI);\n}\n\nexport const fetchCatByBreedId = (id) => {\n  const searchParams = new URLSearchParams({\n    breed_ids: id,\n  });\n\n  return catApi.get(`${IMAGE_URI}?${searchParams}`);\n}","import SlimSelect from \"slim-select\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst ERROR_MESSAGE = \"Something went wrong!\";\n\nimport { fetchBreeds, fetchCatByBreedId } from \"./cat-api.js\";\n\nconst breedSelect = document.querySelector('.breed-select');\nconst pageLoader = document.querySelector('.loader');\nconst catInfo = document.querySelector('.cat-info');\n\nconst makeVisible = (element) => {\n  element.classList.remove('visually-hidden');\n}\n\nconst makeHidden = (element) => {\n  element.classList.add('visually-hidden');\n}\n\nmakeVisible(pageLoader);\n\nconst showBreedList = (data) => {\n  const breedsInfo = data.map(({ id, name }) => {\n    return { text: name, value: id };\n  });\n\n  breedsInfo.unshift({text: '', placeholder: true});\n\n  slimSelect.setData(breedsInfo);\n\n  makeHidden(pageLoader);\n  makeVisible(breedSelect);\n}\n\nconst slimSelect = new SlimSelect({\n  select: breedSelect,\n  settings: {\n    placeholderText: 'Select a breed:',\n  },\n  events: {\n    afterChange: (newVal) => {\n      const breedId = newVal[0].value;\n\n      if (breedId) {\n        makeHidden(catInfo);\n        makeVisible(pageLoader);\n\n        fetchCatByBreedId(breedId)\n          .then(({ data }) => showCat(data[0]))\n          .catch(() => {\n            iziToast.error({\n              message: ERROR_MESSAGE,\n              position: \"topRight\",\n            })\n          });\n      }\n    }\n  }\n})\n\nconst showCat = (data) => {\n  const {\n    url,\n    breeds: [\n      { name, temperament, description }\n    ]\n  } = data;\n\n  catInfo.innerHTML = `\n    <img class=\"img\" src=\"${url}\" alt=\"${name}\">\n    <div class=\"cat-content\">\n      <div class=\"name\">${name}</div>\n      <div class=\"description\">${description}</div>\n      <div class=\"temperament\">Temperament: ${temperament}</div>\n    </div>\n  `;\n\n  makeHidden(pageLoader);\n  makeVisible(catInfo);\n}\n\nfetchBreeds()\n  .then(({ data }) => showBreedList(data))\n  .catch(() => {\n    iziToast.error({\n      message: ERROR_MESSAGE,\n      position: \"topRight\",\n    })\n  });\n"],"names":["API_KEY","API_URL","BREEDS_URI","IMAGE_URI","catApi","axios","fetchBreeds","fetchCatByBreedId","id","searchParams","ERROR_MESSAGE","breedSelect","pageLoader","catInfo","makeVisible","element","makeHidden","showBreedList","data","breedsInfo","name","slimSelect","SlimSelect","newVal","breedId","showCat","iziToast","url","temperament","description"],"mappings":"owBAEA,MAAMA,EAAU,wEACVC,EAAU,+BAEVC,EAAa,UACbC,EAAY,iBAEZC,EAASC,EAAM,OAAO,CAC1B,QAASJ,EACT,QAAS,CAAC,YAAaD,CAAO,CAChC,CAAC,EAEYM,EAAc,IAClBF,EAAO,IAAIF,CAAU,EAGjBK,EAAqBC,GAAO,CACvC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,UAAWD,CACf,CAAG,EAED,OAAOJ,EAAO,IAAI,GAAGD,CAAS,IAAIM,CAAY,EAAE,CAClD,ECpBMC,EAAgB,wBAIhBC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAeC,GAAY,CAC/BA,EAAQ,UAAU,OAAO,iBAAiB,CAC5C,EAEMC,EAAcD,GAAY,CAC9BA,EAAQ,UAAU,IAAI,iBAAiB,CACzC,EAEAD,EAAYF,CAAU,EAEtB,MAAMK,EAAiBC,GAAS,CAC9B,MAAMC,EAAaD,EAAK,IAAI,CAAC,CAAE,GAAAV,EAAI,KAAAY,MAC1B,CAAE,KAAMA,EAAM,MAAOZ,CAAE,EAC/B,EAEDW,EAAW,QAAQ,CAAC,KAAM,GAAI,YAAa,EAAI,CAAC,EAEhDE,EAAW,QAAQF,CAAU,EAE7BH,EAAWJ,CAAU,EACrBE,EAAYH,CAAW,CACzB,EAEMU,EAAa,IAAIC,EAAW,CAChC,OAAQX,EACR,SAAU,CACR,gBAAiB,iBAClB,EACD,OAAQ,CACN,YAAcY,GAAW,CACvB,MAAMC,EAAUD,EAAO,CAAC,EAAE,MAEtBC,IACFR,EAAWH,CAAO,EAClBC,EAAYF,CAAU,EAEtBL,EAAkBiB,CAAO,EACtB,KAAK,CAAC,CAAE,KAAAN,CAAM,IAAKO,EAAQP,EAAK,CAAC,CAAC,CAAC,EACnC,MAAM,IAAM,CACXQ,EAAS,MAAM,CACb,QAAShB,EACT,SAAU,UACxB,CAAa,CACb,CAAW,EAEN,CACF,CACH,CAAC,EAEKe,EAAWP,GAAS,CACxB,KAAM,CACJ,IAAAS,EACA,OAAQ,CACN,CAAE,KAAAP,EAAM,YAAAQ,EAAa,YAAAC,CAAa,CACnC,CACF,EAAGX,EAEJL,EAAQ,UAAY;AAAA,4BACMc,CAAG,UAAUP,CAAI;AAAA;AAAA,0BAEnBA,CAAI;AAAA,iCACGS,CAAW;AAAA,8CACED,CAAW;AAAA;AAAA,IAIvDZ,EAAWJ,CAAU,EACrBE,EAAYD,CAAO,CACrB,EAEAP,EAAa,EACV,KAAK,CAAC,CAAE,KAAAY,CAAM,IAAKD,EAAcC,CAAI,CAAC,EACtC,MAAM,IAAM,CACXQ,EAAS,MAAM,CACb,QAAShB,EACT,SAAU,UAChB,CAAK,CACL,CAAG"}